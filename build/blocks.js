(()=>{var e,t={114:(e,t,n)=>{"use strict";const r=window.lodash,o=window.wp.blocks,a=window.wp.i18n,l=window.wp.data,s=window.wp.compose,i=window.wp.components,c=window.wp.blockEditor,d=window.wp.element,u=window.React,p=window.wp.primitives,g=(0,u.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,u.createElement)(p.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),m=(0,d.forwardRef)((function({icon:e,size:t=24,...n},r){return(0,d.cloneElement)(e,{width:t,height:t,...n,ref:r})})),h=(0,u.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,u.createElement)(p.Path,{d:"M7 13.8h6v-1.5H7v1.5zM18 16V4c0-1.1-.9-2-2-2H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2zM5.5 16V4c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12c0 .3-.2.5-.5.5H6c-.3 0-.5-.2-.5-.5zM7 10.5h8V9H7v1.5zm0-3.3h8V5.8H7v1.4zM20.2 6v13c0 .7-.6 1.2-1.2 1.2H8v1.5h11c1.5 0 2.7-1.2 2.7-2.8V6h-1.5z"})),f="rrze-newsletter/post-inserter",_="rrze-newsletter/post-inserter-block",y={postIdsByBlocks:{},existingBlockIdsInOrder:[],insertedPostIds:[]},w=e=>(0,r.flatMap)(e,(e=>[...e.name===f?[e.clientId]:[],...w(e.innerBlocks)]));(0,l.registerStore)(_,{reducer(e=y,t){switch(t.type){case"SET_HANDLED_POST_IDS":const{clientId:n,existingBlocks:o}=t.props,a=w(o);return{...e,existingBlockIdsInOrder:a,postIdsByBlocks:(0,r.pick)({...e.postIdsByBlocks,[n]:t.handledPostIds},a)};case"SET_INSERTED_POST_IDS":return{...e,insertedPostIds:(0,r.uniq)([...e.insertedPostIds,...t.insertedPostIds])};case"REMOVE_BLOCK":return{...e,existingBlockIdsInOrder:(0,r.without)(e.existingBlockIdsInOrder,t.clientId),postIdsByBlocks:(0,r.omit)(e.postIdsByBlocks,[t.clientId])}}return e},actions:{setHandledPostsIds:(e,t)=>({type:"SET_HANDLED_POST_IDS",handledPostIds:e,props:t}),setInsertedPostsIds:e=>({type:"SET_INSERTED_POST_IDS",insertedPostIds:e}),removeBlock:e=>({type:"REMOVE_BLOCK",clientId:e})},selectors:{getHandledPostIds({postIdsByBlocks:e,existingBlockIdsInOrder:t,insertedPostIds:n},o){const a=t.indexOf(o),l=(0,r.slice)(t,0,a);return[...(0,r.uniq)((0,r.flatten)((0,r.values)((0,r.pick)(e,l)))),...n]}}});const b=JSON.parse('{"name":"rrze-newsletter/post-inserter","category":"widgets","supports":["align"],"attributes":{"areBlocksInserted":{"type":"boolean","default":false},"postsToShow":{"type":"number","default":3},"preventDeduplication":{"type":"boolean","default":false},"displayPostSubtitle":{"type":"boolean","default":false},"displayAuthor":{"type":"boolean","default":false},"displayPostExcerpt":{"type":"boolean","default":true},"excerptLength":{"type":"number","default":15},"displayPostDate":{"type":"boolean","default":false},"displayFeaturedImage":{"type":"boolean","default":true},"displayContinueReading":{"type":"boolean","default":false},"displaySponsoredPosts":{"type":"boolean","default":true},"innerBlocksToInsert":{"type":"array","default":[]},"featuredImageAlignment":{"type":"string","default":"left"},"featuredImageSize":{"type":"string","default":"large"},"isDisplayingSpecificPosts":{"type":"boolean","default":false},"specificPosts":{"type":"array","default":[]},"textFontSize":{"type":"string"},"headingFontSize":{"type":"string"},"subHeadingFontSize":{"type":"string"},"textColor":{"type":"string"},"headingColor":{"type":"string"},"subHeadingColor":{"type":"string"},"postType":{"type":"string","default":"post"},"tags":{"type":"array","default":[]},"tagExclusions":{"type":"array","default":[]},"categories":{"type":"array","default":[]},"categoryExclusions":{"type":"array","default":[]}}}'),z=window.wp.date,E=(e,t)=>("number"==typeof e&&(e+="px"),t.style={...t.style||{},typography:{fontSize:e}},t),S=(e,t)=>{const n=[];let r=t.displayAuthor;const o=e.rrze_sponsors_info&&0<e.rrze_sponsors_info.length;if(o&&("native"===e.meta.rrze_sponsor_sponsorship_scope||e.rrze_sponsors_info.reduce(((e,t)=>"native"===t.sponsor_scope||e),!1))){const r=e.rrze_sponsors_info[0].sponsor_flag;n.push(((e,{textFontSize:t})=>["core/heading",E(t,{className:"rrze-sponsors-flag",content:`<span style="background-color:${rrze_email_editor_data.sponsors_flag_hex};color:${rrze_email_editor_data.sponsors_flag_text_color};font-weight:700;padding:2px 4px;text-transform:uppercase">${e}</span>`,level:6,fontSize:"small"})])(r,t))}if(n.push(((e,{headingFontSize:t,headingColor:n})=>["core/heading",E(t,{style:{color:{text:n}},content:`<a href="${e.link}">${e.title.rendered}</a>`,level:3})])(e,t)),t.displayPostSubtitle&&e.meta?.rrze_post_subtitle&&n.push(((e,{subHeadingFontSize:t,subHeadingColor:n})=>{const r={level:4,content:(e?.meta?.rrze_post_subtitle||"").trim(),style:{color:{text:n}}};return["core/heading",E(t,r)]})(e,t)),o&&"underwritten"!==e.meta.rrze_sponsor_sponsorship_scope){("sponsor"===e.meta.rrze_sponsor_native_byline_display||"inherit"===e.meta.rrze_sponsor_native_byline_display&&!1===e.rrze_sponsors_info.reduce(((e,t)=>"author"===t.sponsor_byline_display||e),!1))&&(r=!1);const o=((e,{textFontSize:t,textColor:n})=>{const r=e.filter((e=>"native"===e.sponsor_scope));if(!r.length)return[];const o=[];return r.forEach((e=>{const t=e.sponsor_url?`<a href="${e.sponsor_url}">${e.sponsor_name}</a>`:e.sponsor_name;o.push(t)})),["core/heading",E(t,{content:r[0].sponsor_byline+" "+o.join(", "),fontSize:"normal",level:6,style:{color:{text:n}}})]})(e.rrze_sponsors_info,t);o?.length&&n.push(o)}if(r){const r=((e,{textFontSize:t,textColor:n})=>{const{rrze_author_info:r}=e;if(Array.isArray(r)&&r.length){const e=r.reduce(((e,t,n)=>{const{author_link:o,display_name:l}=t;if(o&&l){const t=r.length>2&&n<r.length-1?(0,a._x)(",","comma separator for multiple authors","rrze-newsletter"):"",s=r.length>1&&n===r.length-1?(0,a.__)("and ","rrze-newsletter"):"";e.push(`${s}<a href="${o}">${l}</a>${t}`)}return e}),[]);return["core/heading",E(t,{content:(0,a.__)("By ","rrze-newsletter")+e.join(" "),fontSize:"normal",level:6,style:{color:{text:n}}})]}return null})(e,t);r&&n.push(r)}t.displayPostDate&&e.date_gmt&&n.push(((e,{textFontSize:t,textColor:n})=>{const r=(0,z.getSettings)().formats.date;return["core/paragraph",E(t,{content:(0,z.dateI18n)(r,e.date_gmt),fontSize:"normal",style:{color:{text:n}}})]})(e,t)),t.displayPostExcerpt&&n.push(((e,{excerptLength:t,textFontSize:n,textColor:r})=>{let o=e.excerpt.rendered;const a=document.createElement("div");a.innerHTML=o,o=a.textContent||a.innerText||"";const l={content:(t<o.trim().split(" ").length?`${o.split(" ",t).join(" ")} […]`:o).trim(),style:{color:{text:r}}};return["core/paragraph",E(n,l)]})(e,t)),t.displayContinueReading&&n.push(((e,{textFontSize:t,textColor:n})=>{const r={content:`<a href="${e.link}">${(0,a.__)("Continue reading…","rrze")}</a>`,style:{color:{text:n}}};return["core/paragraph",E(t,r)]})(e,t));const l=e.featuredImageLargeURL||e.featuredImageMediumURL;if(t.displayFeaturedImage&&l){const r=e.featured_media,o=(t=!1)=>["core/image",{id:r,url:t?e.featuredImageLargeURL:e.featuredImageMediumURL,href:e.link,...t?{align:"center"}:{}}];let a="50%",l="50%";if(t.featuredImageSize)switch(t.featuredImageSize){case"small":a="25%",l="75%";break;case"medium":a="33.33%",l="66.66%"}const s=["core/column",{width:a},[o()]],i=["core/column",{width:l},n];switch(t.featuredImageAlignment){case"left":return[["core/columns",{},[s,i]]];case"right":return[["core/columns",{},[i,s]]];case"top":return[o(!0),...n]}}return n},v=([e,t,n=[]])=>(0,o.createBlock)(e,t,n.map(v)),R=e=>({attrs:(0,r.omit)(e.attributes,"content"),blockName:e.name,innerHTML:(0,o.getBlockContent)(e),innerBlocks:e.innerBlocks.map(R)}),C=window.wp.url,k=window.wp.apiFetch;var x=n.n(k);const I=window.wp.htmlEntities;class P extends d.Component{constructor(e){super(e),this.state={suggestions:[],validValues:{},loading:this.isFetchingInfoOnLoad()},this.debouncedUpdateSuggestions=(0,r.debounce)(this.updateSuggestions,500)}isFetchingInfoOnLoad=()=>{const{tokens:e,fetchSavedInfo:t}=this.props;return Boolean(e.length&&t)};componentDidMount(){if(this.isFetchingInfoOnLoad()){const{tokens:e,fetchSavedInfo:t}=this.props;t(e).then((e=>{const{validValues:t}=this.state;e.forEach((e=>{t[e.value]=e.label})),this.setState({validValues:t,loading:!1})}))}}componentWillUnmount(){delete this.suggestionsRequest,this.debouncedUpdateSuggestions.cancel()}getLabelsForValues(e){const{validValues:t}=this.state;return e.reduce(((e,n)=>t[n]?[...e,t[n]]:e),[])}getValuesForLabels(e){const{validValues:t}=this.state;return e.map((e=>Object.keys(t).find((n=>t[n]===e))))}updateSuggestions(e){const{fetchSuggestions:t}=this.props;t&&this.setState({loading:!0},(()=>{const n=t(e);n.then((e=>{if(this.suggestionsRequest!==n)return;const{validValues:t}=this.state,r=[];e.forEach((e=>{r.push(e.label),t[e.value]=e.label})),this.setState({suggestions:r,validValues:t,loading:!1})})).catch((()=>{this.suggestionsRequest===n&&this.setState({loading:!1})})),this.suggestionsRequest=n}))}handleOnChange(e){const{onChange:t}=this.props;t(this.getValuesForLabels(e))}getTokens(){const{tokens:e}=this.props;return this.getLabelsForValues(e)}render(){const{help:e,label:t=""}=this.props,{suggestions:n,loading:r}=this.state;return React.createElement("div",{className:"autocomplete-tokenfield"},React.createElement(i.FormTokenField,{value:this.getTokens(),suggestions:n,onChange:e=>this.handleOnChange(e),onInputChange:e=>this.debouncedUpdateSuggestions(e),label:t}),r&&React.createElement(i.Spinner,null),e&&React.createElement("p",{className:"autocomplete-tokenfield__help"},e))}}const B=P,L=e=>e.map((e=>[e.id,e.title].join("--"))),T=e=>{const t=e.match(new RegExp("^([\\d]*)--(.*)"));return t?[t[1],t[2]]:e},F=({attributes:e,setAttributes:t})=>{const[n,o]=(0,d.useState)([]),[l,s]=(0,d.useState)(!1),{categoryExclusions:c,tags:u,tagExclusions:p}=e;(0,d.useEffect)((()=>{x()({path:(0,C.addQueryArgs)("/wp/v2/categories",{per_page:-1})}).then(o)}),[]);const g=n.reduce(((e,t)=>({...e,[t.name]:t})),{}),[m,h]=(0,d.useState)(!1),[f,_]=(0,d.useState)([]),y=e=>x()({path:(0,C.addQueryArgs)("/wp/v2/tags",{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then((function(e){return e.map((e=>({value:e.id,label:(0,I.decodeEntities)(e.name)||(0,a.__)("(no title)","rrze-newsletter")})))})),w=e=>x()({path:(0,C.addQueryArgs)("/wp/v2/tags",{per_page:100,_fields:"id,name",include:e.join(",")})}).then((function(e){return e.map((e=>({value:e.id,label:(0,I.decodeEntities)(e.name)||(0,a.__)("(no title)","rrze-newsletter")})))}));return React.createElement("div",{className:"rrze-newsletter-query-controls"},React.createElement(i.ToggleControl,{label:(0,a.__)("Display specific posts","rrze-newsletter"),checked:e.isDisplayingSpecificPosts,onChange:e=>t({isDisplayingSpecificPosts:e})}),e.isDisplayingSpecificPosts?React.createElement(i.FormTokenField,{label:React.createElement("div",null,(0,a.__)("Add posts","rrze-newsletter"),m&&React.createElement(i.Spinner,null)),onChange:e=>{t({specificPosts:e.map((e=>{const[t,n]=T(e);return{id:parseInt(t),title:n}}))})},value:L(e.specificPosts),suggestions:L(f),displayTransform:e=>{const[t,n]=T(e);return n||t},onInputChange:(0,r.debounce)((e=>{m||0===e.length||(h(!0),(e=>x()({path:(0,C.addQueryArgs)("/wp/v2/search",{search:e,per_page:20,_fields:"id,title",subtype:"post"})}).then((e=>e.map((e=>({id:e.id,title:(0,I.decodeEntities)(e.title)||(0,a.__)("(no title)","rrze-newsletter")}))))))(e).then((e=>{h(!1),_(e)})))}),400)}):React.createElement(d.Fragment,null,React.createElement(i.QueryControls,{numberOfItems:e.postsToShow,onNumberOfItemsChange:e=>t({postsToShow:e}),categorySuggestions:g,onCategoryChange:e=>{if(e.some((e=>"string"==typeof e&&!g[e])))return;const n=e.map((e=>"string"==typeof e?g[e]:e));if((0,r.includes)(n,null))return!1;t({categories:n})},selectedCategories:e.categories,minItems:1,maxItems:20}),React.createElement("p",{key:"toggle-advanced-filters"},React.createElement(i.Button,{isLink:!0,onClick:()=>s(!l)},l?(0,a.__)("Hide Advanced Filters","rrze-newsletter"):(0,a.__)("Show Advanced Filters","rrze-newsletter"))),l&&React.createElement(d.Fragment,null,React.createElement(B,{key:"tags",tokens:u,onChange:e=>{const n=e.filter((e=>!!e));t({tags:n})},fetchSuggestions:y,fetchSavedInfo:w,label:(0,a.__)("Tags","rrze-newsletter")}),React.createElement(B,{key:"category-exclusion",tokens:c,onChange:e=>{const n=e.filter((e=>!!e));t({categoryExclusions:n})},fetchSuggestions:e=>x()({path:(0,C.addQueryArgs)("/wp/v2/categories",{search:e,per_page:20,_fields:"id,name",orderby:"count",order:"desc"})}).then((function(e){return e.map((e=>({value:e.id,label:(0,I.decodeEntities)(e.name)||(0,a.__)("(no title)","rrze-newsletter")})))})),fetchSavedInfo:e=>x()({path:(0,C.addQueryArgs)("/wp/v2/categories",{per_page:100,_fields:"id,name",include:e.join(",")})}).then((function(e){return e.map((e=>({value:e.id,label:(0,I.decodeEntities)(e.name)||(0,a.__)("(no title)","rrze-newsletter")})))})),label:(0,a.__)("Excluded Categories","rrze-newsletter")}),React.createElement(B,{key:"tag-exclusion",tokens:p,onChange:e=>{const n=e.filter((e=>!!e));t({tagExclusions:n})},fetchSuggestions:y,fetchSavedInfo:w,label:(0,a.__)("Excluded Tags","rrze-newsletter")}),React.createElement(i.SelectControl,{key:"query-controls-order-select",label:(0,a.__)("Order by"),value:`${e.orderBy}/${e.order}`,options:[{label:(0,a.__)("Newest to oldest"),value:"date/desc"},{label:(0,a.__)("Oldest to newest"),value:"date/asc"},{
/* translators: label for ordering posts by title in ascending order */
label:(0,a.__)("A → Z"),value:"title/asc"},{
/* translators: label for ordering posts by title in descending order */
label:(0,a.__)("Z → A"),value:"title/desc"}],onChange:n=>{const[r,o]=n.split("/");o!==e.order&&t({order:o}),r!==e.orderBy&&t({orderBy:r})}}))))};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}function D({help:e,label:t,multiple:n=!1,onChange:o,optgroups:a=[],className:l,hideLabelFromVision:c,...d}){const u=`inspector-select-control-${(0,s.useInstanceId)(D)}`;return(0,r.isEmpty)(a)?null:React.createElement(i.BaseControl,{label:t,hideLabelFromVision:c,id:u,help:e,className:l},React.createElement("select",A({id:u,className:"components-select-control__input",onChange:e=>{if(n){const t=[...e.target.options].filter((({selected:e})=>e)).map((({value:e})=>e));o(t)}else o(e.target.value)},"aria-describedby":e?void 0:`${u}__help`,multiple:n},d),a.map((({label:e,options:t},n)=>React.createElement("optgroup",{label:e,key:n},t.map(((e,t)=>React.createElement("option",{key:`${e.label}-${e.value}-${t}`,value:e.value,disabled:e.disabled},e.label))))))))}const O=[{label:(0,a.__)("Sans Serif","rrze-newsletter"),options:[{value:"Arial, Helvetica, sans-serif",label:(0,a.__)("Arial","rrze-newsletter")},{value:"Tahoma, sans-serif",label:(0,a.__)("Tahoma","rrze-newsletter")},{value:"Trebuchet MS, sans-serif",label:(0,a.__)("Trebuchet","rrze-newsletter")},{value:"Verdana, sans-serif",label:(0,a.__)("Verdana","rrze-newsletter")}]},{label:(0,a.__)("Serif","rrze-newsletter"),options:[{value:"Georgia, serif",label:(0,a.__)("Georgia","rrze-newsletter")},{value:"Palatino, serif",label:(0,a.__)("Palatino","rrze-newsletter")},{value:"Times New Roman, serif",label:(0,a.__)("Times New Roman","rrze-newsletter")}]},{label:(0,a.__)("Monospace","rrze-newsletter"),options:[{value:"Courier, monospace",label:(0,a.__)("Courier","rrze-newsletter")}]}],H=e=>{const{getEditedPostAttribute:t}=e("core/editor"),n=t("meta");return{fontBody:n.rrze_newsletter_font_body||O[1].options[0].value,fontHeader:n.rrze_newsletter_font_header||O[0].options[0].value,backgroundColor:n.rrze_newsletter_background_color||"#ffffff"}},N=(document.implementation.createHTMLDocument("Temp"),()=>{const e=(0,d.useRef)(),{fontBody:t,fontHeader:n}=(0,l.useSelect)(H);return(0,d.useEffect)((()=>{const r=e.current,o=()=>{const e=r.querySelector('iframe[title="Editor canvas"]');if(e){const r=()=>{const r=e.contentDocument?.documentElement;r&&(r.style.setProperty("--rrze-newsletter-body-font",t),r.style.setProperty("--rrze-newsletter-header-font",n),r.querySelector("body").style.setProperty("background","none"))};return r(),e.addEventListener("load",r),()=>{e.removeEventListener("load",r)}}};o();const a=new MutationObserver(o);return a.observe(r,{childList:!0}),()=>{a.disconnect()}}),[t,n]),e});(0,l.withSelect)(H)((({fontBody:e,fontHeader:t,backgroundColor:n})=>((0,d.useEffect)((()=>{document.documentElement.style.setProperty("--rrze-newsletter-body-font",e)}),[e]),(0,d.useEffect)((()=>{document.documentElement.style.setProperty("--rrze-newsletter-header-font",t)}),[t]),(0,d.useEffect)((()=>{const e=document.querySelector(".editor-styles-wrapper");e&&(e.style.backgroundColor=n)}),[n]),null))),(0,s.compose)([(0,l.withDispatch)((e=>{const{editPost:t}=e("core/editor");return{editPost:t}})),(0,l.withSelect)(H)])((({editPost:e,fontBody:t,fontHeader:n,backgroundColor:r})=>{const o=(t,n)=>{e({meta:{[t]:n}})},l=`inspector-select-control-${(0,s.useInstanceId)(D)}`;return React.createElement(i.Panel,null,React.createElement(i.PanelBody,{name:"rrze-newsletter-typography-panel",title:(0,a.__)("Typography","rrze-newsletter")},React.createElement(i.PanelRow,null,React.createElement(D,{label:(0,a.__)("Headings font","rrze-newsletter"),value:n,optgroups:O,onChange:e=>o("rrze_newsletter_font_header",e)})),React.createElement(i.PanelRow,null,React.createElement(D,{label:(0,a.__)("Body font","rrze-newsletter"),value:t,optgroups:O,onChange:e=>o("rrze_newsletter_font_body",e)}))),React.createElement(i.PanelBody,{name:"rrze-newsletter-color-panel",title:(0,a.__)("Color","rrze-newsletter")},React.createElement(i.PanelRow,{className:"rrze-newsletter__color-panel"},React.createElement(i.BaseControl,{label:(0,a.__)("Background color","rrze-newsletter"),id:l},React.createElement(i.ColorPicker,{id:l,color:r,onChangeComplete:e=>o("rrze_newsletter_background_color",e.hex),disableAlpha:!0})))))}));var M=n(184),V=n.n(M);const U=(0,d.forwardRef)((({isReady:e,blocks:t,className:n,viewportWidth:r},o)=>{const a=(0,s.useRefEffect)((e=>{const t=new MutationObserver((()=>{const n=e.querySelector('iframe[title="Editor canvas"]');if(n){const e=()=>{n.style.border=0,t.disconnect()};e(),n.addEventListener("load",e)}}));return t.observe(e,{childList:!0}),()=>{t.disconnect()}}),[]),l=(0,s.useRefEffect)((e=>{const t=document.getElementById("rrze-newsletter__layout-css");if(!t)return;const n=t.cloneNode(!0),r=new MutationObserver((()=>{const o=e.querySelector('iframe[title="Editor canvas"]');if(o){const e=o.contentDocument,a=()=>{e.body.id=t.dataset.previewid,e.contains(n)||e.head.appendChild(n),r.disconnect()};a(),o.addEventListener("load",a)}}));return r.observe(e,{childList:!0}),()=>{r.disconnect()}}),[]);return React.createElement("div",{className:V()("rrze-posts-inserter__preview",n),ref:(0,s.useMergeRefs)([o,a,l,N()])},e?React.createElement(c.BlockPreview,{blocks:t,viewportWidth:r}):React.createElement(i.Spinner,null))})),$=(0,s.compose)([(0,l.withSelect)(((e,t)=>{const{postsToShow:n,order:o,orderBy:a,postType:l,categories:s,isDisplayingSpecificPosts:i,specificPosts:c,preventDeduplication:d,tags:u,tagExclusions:p,categoryExclusions:g,excerptLength:m,displaySponsoredPosts:h}=t.attributes,{getEntityRecords:f,getMedia:y}=e("core"),{getSelectedBlock:w,getBlocks:b,getSettings:z}=e("core/block-editor"),E=s&&s.length>0?s.map((e=>e.id)):[],{getHandledPostIds:S}=e(_),v=S(t.clientId);let R=[];const C=i&&c.length>0,k={categories:E,tags:u,order:o,orderby:a,per_page:n,exclude:d?[]:v,categories_exclude:g,tags_exclude:p,excerpt_length:m,exclude_sponsors:h?0:1};if(!i||C){const e=i?{include:c.map((e=>e.id))}:(0,r.pickBy)(k,(e=>!(0,r.isUndefined)(e)));R=f("postType",l,e)||[]}return C&&(R=c.reduce(((e,{id:t})=>{const n=(0,r.find)(R,["id",t]);return n?[...e,n]:e}),[])),{existingBlocks:b(),blockEditorSettings:z(),selectedBlock:w(),postList:R.map((e=>{if(e.featured_media){const t=y(e.featured_media),n=(0,r.get)(t,"source_url",null),o=(0,r.get)(t,["media_details","sizes","medium","source_url"],null)||n,a=(0,r.get)(t,["media_details","sizes","large","source_url"],null)||n;return{...e,featuredImageMediumURL:o,featuredImageLargeURL:a}}return e}))}})),(0,l.withDispatch)(((e,t)=>{const{replaceBlocks:n}=e("core/block-editor"),{setHandledPostsIds:r,setInsertedPostsIds:o,removeBlock:a}=e(_);return{replaceBlocks:e=>{n(t.selectedBlock.clientId,e)},setHandledPostsIds:e=>r(e,t),setInsertedPostsIds:o,removeBlock:()=>a(t.clientId)}}))])((({setAttributes:e,attributes:t,postList:n,replaceBlocks:r,setHandledPostsIds:o,setInsertedPostsIds:l,removeBlock:s,blockEditorSettings:u})=>{const[p,f]=(0,d.useState)(!t.displayFeaturedImage),_=JSON.stringify(n),y=(0,d.useMemo)((()=>((e,t)=>((e,t)=>e.reduce(((e,n)=>[...e,...S(n,t)]),[]))(e,t).map(v))(n,t)),[_,t]),w=JSON.stringify(y);(0,d.useEffect)((()=>{const{isDisplayingSpecificPosts:e,specificPosts:r}=t;if(!t.displayFeaturedImage)return f(!0);if(e&&0===r.length)return f(!0);if(f(!1),0<n.length){const e=[];if(n.map((t=>t.featured_media&&e.push(t.featured_media))),0===e.length)return f(!0);(w.match(/\"name\":\"core\/image\"/g)||[]).length===e.length&&f(!0)}}),[_,w]);const b=y.map(R);(0,d.useEffect)((()=>{e({innerBlocksToInsert:b})}),[JSON.stringify(b)]);const z=n.map((e=>e.id));(0,d.useEffect)((()=>{t.areBlocksInserted&&(r(y),l(z))}),[t.areBlocksInserted]),(0,d.useEffect)((()=>{if(!t.preventDeduplication)return o(z),s}),[z.join()]);const E=[{icon:"align-none",title:(0,a.__)("Show image on top","rrze-newsletter"),isActive:"top"===t.featuredImageAlignment,onClick:()=>e({featuredImageAlignment:"top"})},{icon:"align-pull-left",title:(0,a.__)("Show image on left","rrze-newsletter"),isActive:"left"===t.featuredImageAlignment,onClick:()=>e({featuredImageAlignment:"left"})},{icon:"align-pull-right",title:(0,a.__)("Show image on right","rrze-newsletter"),isActive:"right"===t.featuredImageAlignment,onClick:()=>e({featuredImageAlignment:"right"})}],C=[{value:"small",name:(0,a.__)("Small","rrze-newsletter")},{value:"medium",name:(0,a.__)("Medium","rrze-newsletter")},{value:"large",name:(0,a.__)("Large","rrze-newsletter")}];return t.areBlocksInserted?null:React.createElement(d.Fragment,null,React.createElement(c.InspectorControls,null,React.createElement(i.PanelBody,{title:(0,a.__)("Post content settings","rrze-newsletter")},React.createElement(i.ToggleControl,{label:(0,a.__)("Post subtitle","rrze-newsletter"),checked:t.displayPostSubtitle,onChange:t=>e({displayPostSubtitle:t})}),React.createElement(i.ToggleControl,{label:(0,a.__)("Post excerpt","rrze-newsletter"),checked:t.displayPostExcerpt,onChange:t=>e({displayPostExcerpt:t})}),t.displayPostExcerpt&&React.createElement(i.RangeControl,{label:(0,a.__)("Max number of words in excerpt","rrze-newsletter"),value:t.excerptLength,onChange:t=>e({excerptLength:t}),min:10,max:100}),React.createElement(i.ToggleControl,{label:(0,a.__)("Date","rrze-newsletter"),checked:t.displayPostDate,onChange:t=>e({displayPostDate:t})}),React.createElement(i.ToggleControl,{label:(0,a.__)("Featured image","rrze-newsletter"),checked:t.displayFeaturedImage,onChange:t=>e({displayFeaturedImage:t})}),React.createElement(i.ToggleControl,{label:(0,a.__)("Author's name","rrze-newsletter"),checked:t.displayAuthor,onChange:t=>e({displayAuthor:t})}),React.createElement(i.ToggleControl,{label:(0,a.__)('"Continue reading…" link',"rrze-newsletter"),checked:t.displayContinueReading,onChange:t=>e({displayContinueReading:t})})),React.createElement(i.PanelBody,{title:(0,a.__)("Sorting and filtering","rrze-newsletter")},React.createElement(F,{attributes:t,setAttributes:e})),React.createElement(i.PanelBody,{title:(0,a.__)("Text style","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:u.fontSizes,value:t.textFontSize,onChange:t=>e({textFontSize:t})}),React.createElement(i.ColorPicker,{color:t.textColor||"",onChangeComplete:t=>e({textColor:t.hex}),disableAlpha:!0})),React.createElement(i.PanelBody,{title:(0,a.__)("Heading style","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:u.fontSizes,value:t.headingFontSize,onChange:t=>e({headingFontSize:t})}),React.createElement(i.ColorPicker,{color:t.headingColor||"",onChangeComplete:t=>e({headingColor:t.hex}),disableAlpha:!0})),React.createElement(i.PanelBody,{title:(0,a.__)("Subtitle style","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:u.fontSizes,value:t.subHeadingFontSize,onChange:t=>e({subHeadingFontSize:t})}),React.createElement(i.ColorPicker,{color:t.subHeadingColor||"",onChangeComplete:t=>e({subHeadingColor:t.hex}),disableAlpha:!0}))),React.createElement(c.BlockControls,null,t.displayFeaturedImage&&React.createElement(React.Fragment,null,React.createElement(i.Toolbar,{controls:E}),("left"===t.featuredImageAlignment||"right"===t.featuredImageAlignment)&&React.createElement(i.Toolbar,null,React.createElement(i.ToolbarDropdownMenu,{text:(0,a.__)("Image Size","rrze-newsletter"),icon:null},(({onClose:n})=>React.createElement(i.MenuGroup,null,C.map((r=>React.createElement(i.MenuItem,{icon:(t.featuredImageSize===r.value||!t.featuredImageSize&&"large"===r.value)&&g,isSelected:t.featuredImageSize===r.value,key:r.value,onClick:()=>{e({featuredImageSize:r.value})},onClose:n,role:"menuitemradio"},r.name))))))))),React.createElement("div",{className:"rrze-posts-inserter "+(p?"":"rrze-posts-inserter--loading")},React.createElement("div",{className:"rrze-posts-inserter__header"},React.createElement(m,{icon:h}),React.createElement("span",null,(0,a.__)("Posts Inserter","rrze-newsletter"))),React.createElement(U,{isReady:p,blocks:y,viewportWidth:"top"!==t.featuredImageAlignment&&t.displayFeaturedImage?1148:574,className:t.displayFeaturedImage?"image-"+t.featuredImageAlignment:null}),React.createElement("div",{className:"rrze-posts-inserter__footer"},React.createElement(i.Button,{isPrimary:!0,onClick:()=>e({areBlocksInserted:!0})},(0,a.__)("Insert posts","rrze-newsletter")))))})),j="rrze-newsletter/ics",q=React.createElement(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement(i.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(i.Path,{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})),G=(0,u.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,u.createElement)(p.Path,{d:"m19 7-3-3-8.5 8.5-1 4 4-1L19 7Zm-7 11.5H5V20h7v-1.5Z"})),Q=window.wp.serverSideRender;var J=n.n(Q);const W="rrze-newsletter/rss",Z=React.createElement(i.SVG,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement(i.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(i.Circle,{cx:"6.18",cy:"17.82",r:"2.18"}),React.createElement(i.Path,{d:"M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"}));(0,o.registerBlockType)(f,{...b,title:"Post Inserter",icon:React.createElement(m,{icon:h}),edit:$,save:()=>React.createElement(c.InnerBlocks.Content,null)}),(0,o.registerBlockType)(j,{title:(0,a.__)("ICS","rrze-newsletter"),category:"widgets",icon:q,description:(0,a.__)("Display entries from any ICS or ICal feed.","rrze-newsletter"),keywords:["ics","ical","feed"],edit:function({attributes:e,setAttributes:t}){const[n,r]=(0,d.useState)(!e.feedURL),{feedURL:o,itemsToShow:l,displayLocation:s,displayOrganizer:u,displayDescription:p,descriptionLength:g,descriptionLimit:m,headingFontSize:h,textFontSize:f,headingColor:_,textColor:y}=e;function w(n){return()=>{const r=e[n];t({[n]:!r})}}const b=wp.data.select("core/block-editor").getSettings(),z=(0,c.useBlockProps)();if(n)return React.createElement("div",z,React.createElement(i.Placeholder,{icon:q,label:"ICS"},React.createElement("form",{onSubmit:function(e){e.preventDefault(),o&&r(!1)},className:"wp-block-rss__placeholder-form"},React.createElement(i.TextControl,{placeholder:(0,a.__)("Enter URL here…","rrze-newsletter"),value:o,onChange:e=>t({feedURL:e}),className:"wp-block-rss__placeholder-input"}),React.createElement(i.Button,{variant:"primary",type:"submit"},(0,a.__)("Use URL","rrze-newsletter")))));const E=[{icon:G,title:(0,a.__)("Edit ICS URL","rrze-newsletter"),onClick:()=>r(!0)}];return React.createElement(React.Fragment,null,React.createElement(c.BlockControls,null,React.createElement(i.ToolbarGroup,{controls:E})),React.createElement(c.InspectorControls,null,React.createElement(i.PanelBody,{title:(0,a.__)("ICS settings","rrze-newsletter")},React.createElement(i.RangeControl,{label:(0,a.__)("Number of items","rrze-newsletter"),value:l,onChange:e=>t({itemsToShow:e}),min:1,max:15,required:!0}),React.createElement(i.ToggleControl,{label:(0,a.__)("Display location","rrze-newsletter"),checked:s,onChange:w("displayLocation")}),React.createElement(i.ToggleControl,{label:(0,a.__)("Display organizer","rrze-newsletter"),checked:u,onChange:w("displayOrganizer")}),React.createElement(i.ToggleControl,{label:(0,a.__)("Display description","rrze-newsletter"),checked:p,onChange:w("displayDescription")}),p&&React.createElement(i.ToggleControl,{label:(0,a.__)("Limit length of description","rrze-newsletter"),checked:m,onChange:w("descriptionLimit")}),m&&React.createElement(i.RangeControl,{label:(0,a.__)("Max number of words in description","rrze-newsletter"),value:g,onChange:e=>t({descriptionLength:e}),min:10,max:100,required:!0})),React.createElement(i.PanelBody,{title:(0,a.__)("Heading","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:b.fontSizes,value:h,fallbackFontSize:25,onChange:e=>t({headingFontSize:isNaN(e)?16:e})}),React.createElement(i.ColorPicker,{color:_,onChangeComplete:e=>t({headingColor:e.hex}),disableAlpha:!0})),React.createElement(i.PanelBody,{title:(0,a.__)("Text","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:b.fontSizes,value:f,fallbackFontSize:16,onChange:e=>t({textFontSize:isNaN(e)?16:e})}),React.createElement(i.ColorPicker,{color:y,onChangeComplete:e=>t({textColor:e.hex}),disableAlpha:!0}))),React.createElement("div",z,React.createElement(i.Disabled,null,React.createElement(J(),{block:j,attributes:e}))))},attributes:{feedURL:{type:"string",default:""},itemsToShow:{type:"number",default:5},displayDescription:{type:"boolean",default:!1},displayLocation:{type:"boolean",default:!1},displayOrganizer:{type:"boolean",default:!1},descriptionLimit:{type:"boolean",default:!1},descriptionLength:{type:"number",default:25},textFontSize:{type:"number",default:16},headingFontSize:{type:"number",default:25},textColor:{type:"string",default:"#000"},headingColor:{type:"string",default:"#000"}}}),(0,o.registerBlockType)(W,{title:(0,a.__)("RSS","rrze-newsletter"),category:"widgets",icon:Z,description:(0,a.__)("Display entries from any RSS or Atom feed.","rrze-newsletter"),keywords:["atom","feed"],edit:function({attributes:e,setAttributes:t}){const[n,r]=(0,d.useState)(!e.feedURL),{feedURL:o,sinceLastSend:l,itemsToShow:s,displayDate:u,displayContent:p,excerptLimit:g,excerptLength:m,displayReadMore:h,headingFontSize:f,textFontSize:_,headingColor:y,textColor:w}=e;function b(n){return()=>{const r=e[n];t({[n]:!r})}}const z=wp.data.select("core/block-editor").getSettings(),E=(0,c.useBlockProps)();if(n)return React.createElement("div",E,React.createElement(i.Placeholder,{icon:Z,label:"RSS"},React.createElement("form",{onSubmit:function(e){e.preventDefault(),o&&r(!1)},className:"wp-block-rss__placeholder-form"},React.createElement(i.TextControl,{placeholder:(0,a.__)("Enter URL here…","rrze-newsletter"),value:o,onChange:e=>t({feedURL:e}),className:"wp-block-rss__placeholder-input"}),React.createElement(i.Button,{variant:"primary",type:"submit"},(0,a.__)("Use URL","rrze-newsletter")))));const S=[{icon:G,title:(0,a.__)("Edit RSS URL","rrze-newsletter"),onClick:()=>r(!0)}];return React.createElement(React.Fragment,null,React.createElement(c.BlockControls,null,React.createElement(i.ToolbarGroup,{controls:S})),React.createElement(c.InspectorControls,null,React.createElement(i.PanelBody,{title:(0,a.__)("RSS settings","rrze-newsletter")},React.createElement(i.RangeControl,{label:(0,a.__)("Number of items","rrze-newsletter"),value:s,onChange:e=>t({itemsToShow:e}),min:1,max:15,required:!0}),React.createElement(i.ToggleControl,{label:(0,a.__)("Display only new items since the last time the newsletter was sent.","rrze-newsletter"),checked:l,onChange:b("sinceLastSend")}),React.createElement(i.ToggleControl,{label:(0,a.__)("Display date","rrze-newsletter"),checked:u,onChange:b("displayDate")}),React.createElement(i.ToggleControl,{label:(0,a.__)("Display content","rrze-newsletter"),checked:p,onChange:b("displayContent")}),p&&React.createElement(i.ToggleControl,{label:(0,a.__)("Limit length of content","rrze-newsletter"),checked:g,onChange:b("excerptLimit")}),g&&React.createElement(i.RangeControl,{label:(0,a.__)("Max number of words in content","rrze-newsletter"),value:m,onChange:e=>t({excerptLength:e}),min:10,max:100,required:!0}),p&&React.createElement(i.ToggleControl,{label:(0,a.__)('Display "Continue reading"',"rrze-newsletter"),checked:h,onChange:b("displayReadMore")})),React.createElement(i.PanelBody,{title:(0,a.__)("Heading","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:z.fontSizes,value:f,fallbackFontSize:25,onChange:e=>t({headingFontSize:isNaN(e)?16:e})}),React.createElement(i.ColorPicker,{color:y,onChangeComplete:e=>t({headingColor:e.hex}),disableAlpha:!0})),React.createElement(i.PanelBody,{title:(0,a.__)("Text","rrze-newsletter")},React.createElement(i.FontSizePicker,{fontSizes:z.fontSizes,value:_,fallbackFontSize:16,onChange:e=>t({textFontSize:isNaN(e)?16:e})}),React.createElement(i.ColorPicker,{color:w,onChangeComplete:e=>t({textColor:e.hex}),disableAlpha:!0}))),React.createElement("div",E,React.createElement(i.Disabled,null,React.createElement(J(),{block:W,attributes:e}))))},attributes:{feedURL:{type:"string",default:""},sinceLastSend:{type:"boolean",default:!1},itemsToShow:{type:"number",default:5},displayDate:{type:"boolean",default:!1},displayContent:{type:"boolean",default:!1},excerptLimit:{type:"boolean",default:!1},excerptLength:{type:"number",default:25},displayReadMore:{type:"boolean",default:!1},textFontSize:{type:"number",default:16},headingFontSize:{type:"number",default:25},textColor:{type:"string",default:"#000"},headingColor:{type:"string",default:"#000"}}})},184:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var l=o.apply(null,n);l&&e.push(l)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,o,a)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],s=!0,i=0;i<n.length;i++)(!1&a||l>=a)&&Object.keys(r.O).every((e=>r.O[e](n[i])))?n.splice(i--,1):(s=!1,a<l&&(l=a));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={346:0,909:0,896:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[l,s,i]=n,c=0;if(l.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(i)var d=i(r)}for(t&&t(n);c<l.length;c++)a=l[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=globalThis.webpackChunkrrze_newsletter=globalThis.webpackChunkrrze_newsletter||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[909,896],(()=>r(114)));o=r.O(o)})();